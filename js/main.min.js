use strict;const _token=getToken(),POST=GET,GET=GET,body=document.querySelector(body),modalsWrap=document.querySelector(#modalsWrap),bgModals=document.querySelector(.bg-modals),feetbackBtn=document.querySelector(#feetbackBtn),fastOrderBtns=document.querySelectorAll(.js-fast-order),feetbackModal=document.querySelector(#feetback),fastOrderModal=document.querySelector(#fastOrder),modalCloseBtns=document.querySelectorAll(.js-close-modal),closeFastOrderBtn=document.querySelector(#closeFastOrderBtn),orderBtn=document.querySelector(#orderBtn),orderModal=document.querySelector(#order),helpModal=document.querySelector(#help),helpBtn=document.querySelector(#helpBtn),connectionThanksModal=document.querySelector(#connectionThanks),orderThanksModal=document.querySelector(#orderThanks),callbackForm=document.querySelector(#callbackForm),feetbackForm=document.querySelector(#feetbackForm),helpForm=document.querySelector(#helpForm),fastOrderForm=document.querySelector(#fastOrderForm),orderForm=document.querySelector(#orderForm),loginForm=document.querySelector(#loginForm),registrationForm=document.querySelector(#registrationForm),mobileMenuBtn=document.querySelector(#menuBtn),mobileMenu=document.querySelector(#mobileMenu),mobileMenuCloseBtn=document.querySelector(#mobileMenuClose),mainSlider=document.querySelector(#mainSlider),productCarusel=document.querySelector(#productCarusel),popularGoods=document.querySelector(#popularGoods),sectionSlider=document.querySelector(#sectionSlider),newsSlider=document.querySelector(#newsSlider),productSlider=document.querySelector(#productSlider),favoriteBtns=document.querySelectorAll(.js-favorite),inBasketBns=document.querySelectorAll(.js-in-basket),upwardBtn=document.querySelector(#upwardBtn),upBtn=document.querySelector(#up),removeProductBtns=document.querySelectorAll(.js-remove-product),elementLinks=document.querySelectorAll(.js-element-link),dropdownsBtns=document.querySelectorAll(.js-dropdown-btn),switchToggle=document.querySelector(#switchToggle),counters=document.querySelectorAll(.js-counter),catalogNav=document.querySelector(#catalogNav),news=document.querySelector(#news),filtersForm=document.querySelector(#filters),filters=document.querySelectorAll(.js-filter),expandFiltersBtn=document.querySelector(#expandFiltersBtn),filterInputs=document.querySelectorAll(.js-filter-input),rollUpBtns=document.querySelectorAll(.js-roll-up-btn),map=document.querySelector(#map),regTel=^((8+7)[- ])((d{3})[- ])[d- ]{5,10}$,regMail=^([a-z0-9_-]+.)[a-z0-9_-]+@[a-z0-9_-]+(.[a-z0-9_-]+).[a-z]{2,6}$;let yandexMap,marker;const sensitivity=20;let touchStart=null,touchPosition=null,moveStart=null,moveEnd=null;function carusel(e){const t=e.querySelector(#caruselSlidesWrap),r=e.querySelector(#caruselSlides),n=e.querySelectorAll(.js-carusel-slide).length,o=e.querySelector(#caruselArrowPrev),s=e.querySelector(#caruselArrowNext),c=e.querySelectorAll(.js-carusel-dote),i=e.querySelector(#caruselDots),a=e.querySelector(#caruselDotsTrack),l=e.querySelectorAll(.js-carusel-dote-slide);let d=0;function u(){d!=n-1&&(d++,p(),v(c,dot--is-active),g(),v(l,pic-dots__item--is-active))}function m(){0!=d&&(d--,p(),v(c,dot--is-active),g(),v(l,pic-dots__item--is-active))}function f(e){d=e,p(),v(c,dot--is-active),g(),v(l,pic-dots__item--is-active)}function p(){const e=t.offsetWidth,n=de;r.style.transform=`translate(-${n}px, 0)`}function g(){let e=d-1;e0&&(e=0),d=l.length-1&&(e=l.length-3);const t=e(l[0].offsetHeight+parseInt(getComputedStyle(l[0],!0).marginBottom));a.style.transform=`translate(0, -${t}px)`}function v(e,t){Array.from(e).forEach((e,r)={e.classList.remove(t),r==d&&e.classList.add(t)})}window.addEventListener(resize,p,!1),s&&s.addEventListener(click,u),o&&o.addEventListener(click,m),c.length&&Array.from(c).forEach((e,t)={e.addEventListener(click,()={f(t)})}),i&&Array.from(l).forEach((e,t)={e.addEventListener(click,()={f(t)})}),t.addEventListener(dragstart,e={e.preventDefault()}),t.addEventListener(mousedown,function(e){startCursorMove(e)}),t.addEventListener(mouseup,function(e){endCursorMove(e,m,u)}),t.addEventListener(touchstart,function(e){startTouchMove(e)}),t.addEventListener(touchmove,function(e){touchMove(e)}),t.addEventListener(touchend,function(){touchEnd(u,m)})}function slider(e,t=!1){const r=e.querySelector(.js-slider-wrap),n=e.querySelectorAll(.js-slide),o=n.length-1,s=e.querySelector(.js-next),c=e.querySelector(.js-prev),i=e.querySelectorAll(.js-dot);let a=0,l=null,d=!1,u=null;const m=8e3;function f(e){Array.from(i).forEach((t,r)={t.classList.remove(e),ai.length-1&&(a=0),a0&&(a=i.length-1),a==r&&t.classList.add(e)})}function p(){if(d)return;v(t,!1),a++,d=!0;const s=n[0].offsetWidth;l=e.querySelectorAll(.js-slide),r.style.transform=`translate(-${s}px, 0)`,r.classList.add(slides--is-move),f(dot--is-active),setTimeout(()={r.style.transform=translate(0, 0),r.classList.remove(slides--is-move),l[o].after(l[0]),d=!1,v(t,!0,m)},200)}function g(){if(d)return;v(t,!1),a--,d=!0;const s=n[0].offsetWidth;r.classList.remove(slides--is-move),(l=e.querySelectorAll(.js-slide))[0].before(l[o]),r.style.transform=`translate(-${s}px, 0)`,f(dot--is-active),setTimeout(()={r.classList.add(slides--is-move),r.style.transform=translate(0, 0)},20),setTimeout(()={d=!1,v(t,!0,m)},220)}function v(e,t=!1,r=8e3){e&&(tu=setInterval(p,r)clearInterval(u))}1!=n.length&&(v(t,!0,m),r.addEventListener(dragstart,e={e.preventDefault()}),r.addEventListener(mousedown,function(e){startCursorMove(e)}),r.addEventListener(mouseup,function(e){endCursorMove(e,g,p)}),r.addEventListener(mouseover,()={v(t,!1)}),r.addEventListener(mouseout,()={v(t,!0,m)}),s&&s.addEventListener(click,p),c&&c.addEventListener(click,g),r.addEventListener(touchstart,function(e){startTouchMove(e)}),r.addEventListener(touchmove,function(e){touchMove(e)}),r.addEventListener(touchend,function(){touchEnd(p,g)}))}function startTouchMove(e){touchStart=e.changedTouches[0].clientX,touchPosition=touchStart}function touchMove(e){touchPosition=e.changedTouches[0].clientX}function touchEnd(e,t){let r=touchStart-touchPosition;r0&&r=sensitivity&&e(),r0&&-1r=sensitivity&&t()}function startCursorMove(e){moveStart=e.clientX}function endCursorMove(e,t,r){moveEnd=e.clientX;let n=moveStart-moveEnd;n0&&n=sensitivity&&r(),n0&&-1n=sensitivity&&t()}function modalOpen(e){body.classList.add(no-scroll),modalsWrap.classList.add(modals--is-show),setTimeout(()={bgModals.classList.add(bg-modals--is-open),e.classList.add(modal--is-show)},10)}function modalClose(e){e.closest(.js-modal).classList.remove(modal--is-show),body.classList.remove(no-scroll),bgModals.classList.remove(bg-modals--is-open),setTimeout(()={modalsWrap.classList.remove(modals--is-show)},510)}function clearFastOrderList(){fastOrderModal.querySelector(.js-list-wrap).innerHTML=}function mobileMenuOpen(){mobileMenu.classList.add(mobile-menu--is-open)}function mobileMenuClose(){mobileMenu.classList.remove(mobile-menu--is-open)}function initMap(){yandexMap=new ymaps.Map(map,{center[56.836101,60.614578],zoom16}),marker=new ymaps.Placemark([56.836101,60.614578],{hintContentРасположение,balloonContentЭто наша организация}),yandexMap.geoObjects.add(marker)}function getToken(){return document.querySelector('meta[name=csrf-token]').getAttribute(content)}function getData(e,t,r){return new Promise(function(n,o){const s=new XMLHttpRequest;let c=null;s.open(e,r,!0),s.send(t),s.onload=function(){200==s.status(c=JSON.parse(s.response),n(c),cconsole.log(Запрос отправлен)console.log(Неудачная отправка))console.log(Ошибка +s.status)},s.onerror=function(){o(new Error(Network Error))}})}async function loadingNews(){const e=news.getAttribute(data-link),t=news.querySelector(#newsList),r=t.getBoundingClientRect(),n=window.innerHeight,o=r.bottom-n,s=t.querySelectorAll(.news-card);let c=null,i=null;const a={_token_token};if(!(o0news.classList.contains(js-all-loaded)news.classList.contains(js-loading))){if(news.classList.add(js-loading),render(news,[1],getMarkupSpinner),(c=(i=await getData(POST,a,e)).content.news_more)=s.length)return news.querySelector(.spinner).innerHTML='span class=spinner__textЭто все новостиspan',news.classList.add(js-all-loaded),void news.classList.remove(js-loading);renderNews(i.content.news)}}function clearInput(e){Array.from(e).forEach(e={e.value=,e.classList.remove(input--is-error),e.classList.remove(input--is-success)})}function formCheck(...e){let t=!0;return e.forEach(e={t=checkInput(e)&&t}),tt(console.log(sent),t)void 0(console.log(not sent),t)}function setFileName(e,t){const r=e.files[0].name;t.innerHTML=r}function checkValue(e,t){return t.test(e)}function checkInput(e){let t;switch(e.getAttribute(name)){caseemailstatusVisualInput(e,t=checkValue(e.value,regMail));break;casephonestatusVisualInput(e,t=checkValue(e.value,regTel));break;casemessagestatusVisualInput(e,t=isEmptyInput(e.value));break;caseconsentstatusVisualCheckbox(e,t=checkCheckbox(e));break;casepasswordstatusVisualInput(e,t=isEmptyInput(e.value))}return t}function isEmptyInput(e){return!!e.trim()}function showMessage(e,t){return t.innerHTML=e.desc,1==e.rez(t.classList.add(form-error--is-success),t.classList.remove(form-error--is-error),!0)1!=e.rez(t.classList.remove(form-error--is-success),t.classList.add(form-error--is-error),!1)void 0}function showMessageError(e,t){return t.innerHTML=e.desc,1==e.rez(1!=e.rez(t.classList.remove(form-error--is-success),t.classList.add(form-error--is-error),!1)void 0)}function checkCheckbox(e){return e.checked}function statusVisualCheckbox(e,t=!1){const r=e.closest(.js-checkbox);if(!t)return r.classList.add(animation-shake),void setTimeout(()={r.classList.remove(animation-shake)},800)}function statusVisualInput(e,t=!1){return t(e.classList.remove(input--is-error),e.classList.add(input--is-success),!0)(e.classList.remove(input--is-success),e.classList.add(input--is-error),!1)}function sendRegistrationForm(){const e=registrationForm.action,t=registrationForm.querySelectorAll(.js-input),r=registrationForm.querySelector(.js-input-email),n=registrationForm.querySelector(.js-pas-input),o=registrationForm.querySelector(.js-repeat-pass-input),s=registrationForm.querySelector(.js-submit),c=registrationForm.querySelector(.js-message),i=document.querySelector(#registrationTab),a=document.querySelector(#resultTab),l=document.querySelector(#resultMessage);function d(){const e=n.value.trim(),t=o.value.trim();return===e(o.classList.remove(input--is-error),void o.classList.remove(input--is-success))e===t(o.classList.remove(input--is-error),o.classList.add(input--is-success),!0)e!==t(o.classList.add(input--is-error),o.classList.remove(input--is-success),!1)void 0}r.addEventListener(blur,()={checkInput(r)}),n.addEventListener(blur,()={checkInput(n)}),o.addEventListener(input,()={d()}),n.addEventListener(input,()={d()}),s.addEventListener(click,()={const o=formCheck(r,n),s=d();o&&s&&async function(e,r){const n=new FormData(registrationForm);n.append(_token,_token);const o=await getData(e,n,r);showMessageError(o,c)&&(clearInput(t),i.classList.remove(switching-tab__content--is-active),a.classList.add(switching-tab__content--is-active),l.innerHTML=o.desc)}(POST,e)})}function sendLoginForm(){const e=loginForm.action,t=loginForm.querySelectorAll(.js-input),r=loginForm.querySelector(.js-input-email),n=loginForm.querySelector(.js-pas-input),o=loginForm.querySelector(.js-submit),s=loginForm.querySelector(.js-message),c=document.querySelector(#loginTab),i=document.querySelector(#resultTab),a=document.querySelector(#resultMessage);r.addEventListener(blur,()={checkInput(r)}),n.addEventListener(blur,()={checkInput(n)}),o.addEventListener(click,()={formCheck(r,n)&&async function(e,r){const n=new FormData(loginForm);n.append(_token,_token);const o=await getData(e,n,r);showMessageError(o,s)&&(clearInput(t),c.classList.remove(switching-tab__content--is-active),i.classList.add(switching-tab__content--is-active),a.innerHTML=o.desc)}(POST,e)})}function sendCallbackForm(){const e=callbackForm.action,t=callbackForm.querySelectorAll(.js-input),r=callbackForm.querySelector(.js-mail-input),n=callbackForm.querySelector(.js-file-input),o=callbackForm.querySelector(.js-file-name),s=callbackForm.querySelector(.js-checkbox-input),c=callbackForm.querySelector(.js-submit),i=callbackForm.querySelector(.js-message);r.addEventListener(blur,()={checkInput(r)}),n.addEventListener(change,()=setFileName(n,o)),c.addEventListener(click,()={formCheck(r,s)&&async function(e,r){const n=new FormData(callbackForm);n.append(_token,_token),showMessage(await getData(e,n,r),i)&&clearInput(t)}(POST,e)})}function sendHelpForm(){const e=helpForm.action,t=helpForm.querySelectorAll(.js-input),r=helpForm.querySelector(.js-input-email),n=helpForm.querySelector(.js-input-textarea),o=helpForm.querySelector(.js-input-checkbox),s=helpForm.querySelector(.js-submit),c=helpForm.querySelector(.js-message);r.addEventListener(blur,()={checkInput(r)}),n.addEventListener(blur,()={checkInput(n)}),s.addEventListener(click,()={formCheck(r,n,o)&&async function(e,r){const n=new FormData(helpForm);n.append(_token,_token),showMessageError(await getData(e,n,r),c)&&(clearInput(t),helpModal.classList.remove(modal--is-show),connectionThanksModal.classList.add(modal--is-show))}(POST,e)})}function sendFeetbackForm(){const e=feetbackForm.action,t=feetbackForm.querySelectorAll(.js-input),r=feetbackForm.querySelector(.js-input-phone),n=feetbackForm.querySelector(.js-input-checkbox),o=feetbackForm.querySelector(.js-submit),s=feetbackForm.querySelector(.js-message);r.addEventListener(blur,()={checkInput(r)}),o.addEventListener(click,()={formCheck(r,n)&&async function(e,r){const n=new FormData(feetbackForm);n.append(_token,_token),showMessageError(await getData(e,n,r),s)&&(clearInput(t),feetbackModal.classList.remove(modal--is-show),connectionThanksModal.classList.add(modal--is-show))}(POST,e)})}function sendFastOrderForm(){const e=fastOrderForm.action,t=fastOrderForm.querySelectorAll(.js-input),r=fastOrderForm.querySelector(.js-input-email),n=fastOrderForm.querySelector(.js-input-phone),o=fastOrderForm.querySelector(.js-input-checkbox),s=fastOrderForm.querySelector(.js-submit),c=fastOrderForm.querySelector(.js-message),i=fastOrderForm.querySelectorAll(.modal-card);r.addEventListener(blur,()={checkInput(r)}),n.addEventListener(blur,()={checkInput(n)}),s.addEventListener(click,()={formCheck(r,n,o)&&async function(e,r){const n=new FormData(fastOrderForm);n.append(_token,_token),n.append(prod,getArticlesAndQuantityArr(i)),showMessage(await getData(e,n,r),c)&&(clearInput(t),orderThanksModal.classList.add(modal--is-show),fastOrderModal.classList.remove(modal--is-show),clearFastOrderList())}(POST,e)})}function sendOrderForm(){const e=orderForm.action,t=orderForm.querySelectorAll(.js-input),r=orderForm.querySelector(.js-input-email),n=orderForm.querySelector(.js-input-phone),o=orderForm.querySelector(.js-input-checkbox),s=orderForm.querySelector(.js-submit),c=orderForm.querySelector(.js-message);r.addEventListener(blur,()={checkInput(r)}),n.addEventListener(blur,()={checkInput(n)}),s.addEventListener(click,()={formCheck(r,n,o)&&async function(e,r){const n=new FormData(orderForm);n.append(_token,_token),showMessage(await getData(e,n,r),c)&&(clearInput(t),orderThanksModal.classList.add(modal--is-show),orderModal.classList.remove(modal--is-show),clearBasketList())}(POST,e)})}function goTop(){let e=null;Math.max(document.body.scrollTop,document.documentElement.scrollTop)0(window.scrollBy(0,-150),e=setTimeout(goTop(),5))clearTimeout(e)}function setTotalPrice(e){const t=document.querySelectorAll(.js-total-price);Array.from(t).forEach(t={t.innerHTML=e+₽})}function showUpBtn(){body.getBoundingClientRect().top-1e3upBtn.classList.add(up--is-show)upBtn.classList.remove(up--is-show)}function managingСounter(e){const t=e.getAttribute(data-link),r=e.getAttribute(data-article),n=e.querySelector(.js-dec),o=e.querySelector(.js-inc),s=e.querySelector(.js-quantity);let c=null,i={_token_token,articler};n.addEventListener(click,async function(){let e=+s.value;if(0==(e-=1))return e=1,void(s.value=e);i.count=e,c=await getData(POST,i,t),s.value=c.prod.count,setTotalPrice(c.card.total_price)}),o.addEventListener(click,async function(){let e=+s.value;e+=1,i.count=e,c=await getData(POST,i,t),s.value=c.prod.count,setTotalPrice(c.card.total_price)}),s.addEventListener(change,function(){const e=+s.value;if(e=0)return void(s.value=1);if(isNaN(e))return void(s.value=1);console.log(e)})}function dropdownOpen(e){const t=e.closest(.js-dropdown),r=t.querySelector(.js-dropdown-body),n=t.querySelector(.js-dropdown-content).offsetHeight;0==r.offsetHeightr.style.height=n+pxr.style.height=0}function rotateArrowDropdownsBtn(e){findChildren(e,.category__arrow).classList.toggle(category__arrow--is-up)}function rotateSortingArrow(e){findChildren(e,.sorting__arrow-img).classList.toggle(sorting__arrow--is-down)}function findChildren(e,t){return e.querySelector(t)}function toggleSwitch(){const e=switchToggle.classList.contains(switch__toggle--is-left),t=switchToggle.classList.contains(switch__toggle--is-right);if(!e)return switchToggle.classList.remove(switch__toggle--is-right),switchToggle.classList.add(switch__toggle--is-left),void r(left);if(!t)return switchToggle.classList.remove(switch__toggle--is-left),switchToggle.classList.add(switch__toggle--is-right),void r(right);function r(e){const t=document.querySelector(#switchLeft),r=document.querySelector(#switchRight);left===e&&(t.style.display=block,r.style.display=none),right===e&&(r.style.display=block,t.style.display=none)}}function showIElement(e){const t=document.querySelectorAll(.js-element),r=e.dataset.type;Array.from(elementLinks).forEach(e={e.classList.remove(switching-tab--is-active)}),e.classList.add(switching-tab--is-active),Array.from(t).forEach(e={const t=e.getAttribute(id);e.classList.remove(switching-tab__content--is-active),t==r&&e.classList.add(switching-tab__content--is-active)})}function setFavoriteIcon(e,t){const r=e.querySelector(.js-favorite-img);r.src=t.imgiconfavorite-active-icon.svg.imgiconfavorite-icon.svg}function clearBasketList(){const e=document.querySelector(#basket),t=document.querySelectorAll(.js-total-price),r=e.querySelector(#basketList);r.innerHTML=,Array.from(t).forEach(e={console.log(e),e.innerHTML=0 ₽}),console.log(r)}async function filterFn(e){const t=e.getAttribute(data-link),r={_token_token},n=(await getData(POST,r,t)).content,o=document.querySelector(#resetFilters),s=document.querySelectorAll(.js-remove-filter),c=e.querySelector(.js-filter-arrow),i=e.querySelector(.js-filter-arrow-icon),a=e.querySelector(.js-filter-input),l=e.querySelector(.js-filter-body),d=e.querySelector(.js-filter-list),u=e.closest(.js-filters-top),m=u.querySelector(.js-filters-list);let f=y(n,e,!0),p=m.offsetHeight;function g(t){const r=t.target,n=l.classList.contains(filter__body--is-open),o=r.classList.contains(js-filter-input);n&&o(n(d.scrollTop=0),closeAllFilter(filters,e),l.classList.toggle(filter__body--is-open),e.classList.toggle(filter--is-open),i.classList.toggle(filter__arrow-icon--is-up),function(e){const t=e.getBoundingClientRect(),r=e.offsetHeight2,n=e.closest(.js-filters-top),o=n.offsetHeight,s=n.getBoundingClientRect(),c=n.querySelector(.js-filters-list).offsetHeight,i=getComputedStyle(e),a=parseInt(i.marginBottom),l=e.querySelector(.js-filter-list).offsetHeight;n.style.minHeight=l+px;const d=s.bottom-t.bottom-a,u=l-d-r+o;if(u=c)return void(n.style.minHeight=c+px);n.style.minHeight=u+px}(e),e.classList.contains(filter--is-open)(p=m.offsetHeight,u.style.minHeight=p+px))}function v(e,t){const r=e.closest(.js-selected-filter),n=document.querySelector(.js-filters-top),o=e.getAttribute(data-id),s=n.querySelector(`[data-id=${o}]`),c=s.closest(.js-filter),i=s.value;s.checked=!1,c.classList.remove(js-sorted),t.forEach((e,r)={e.field_value_slug==i&&(t[r].checked=!1)}),r.remove()}function h(e,t,r){let n=null;const o=e.querySelector(.js-filter-list);o.innerHTML=,render(o,t,function(e){const{field_slugt,field_value_slugr,field_value_namen,checkedo}=e;return`n      li class=filter__itemn        div class=filter__check input-checkn          label class=filter__check-label input-check__labeln            input data-id=${t}${r} class='input-check__checkbox js-filter-checkbox' type=checkbox ${o'checked=checked'} data-name='${n}' name='${t}' value=${r}n            span class=input-check__fake filter-check__fakespann            span class=sorting__text input-check__textn            ${n}n            spann          labeln        divn      lin      `}),n=e.querySelectorAll(.js-filter-checkbox),Array.from(n).forEach(e={e.addEventListener(change,()={r(e,t),async function(){const e=filtersForm.querySelector(#filterFormSumbit),t=new FormData(filtersForm);let r=null,n=null;t.append(_token,_token),r=await getData(POST,t,testAjaxfilter-product.json),n=r.content.count,e.value=`Показать (${n})`,console.log(e)}()})})}function y(e,t,r){if(r){const r=e.filter(e=1==e.checked),n=e.filter(e=0==e.checked);return n.sort((e,t)=sorting(e,t)),r.sort((e,t)=sorting(e,t)),t.classList.add(js-sorted),r.concat(n)}}function k(t,r){t.checked&&(!function(e,t){const r=document.querySelector(#selectedFilters),n=e.getAttribute(data-name),o=e.value,s=[{field_value_namen,field_sluge.getAttribute(name),field_value_slugo}];let c=null;t.forEach((e,r)={e.field_value_slug==o&&(t[r].checked=!0)}),render(r,s,function(e){const{field_slugt,field_value_slugr,field_value_namen}=e;return`n      div id=${t}${r} class=selected-filter js-selected-filter data-filter=${t}, data-value= n      span class=selected-filter__namen        ${n}n      spann      div class=selected-filter__deleten        span data-id=${t}${r} class=btn js-remove-filtern          img src=.imgcontrolsclose-btn-dark.svg alt= class=btn__iconn        spann      divn    divn      `}),c=r.querySelectorAll(.js-remove-filter),Array.from(c).forEach(e={e.addEventListener(click,()={v(e,t)})})}(t,r),e.classList.remove(js-sorted)),t.checked(!function(e,t){const r=e.getAttribute(name),n=e.value,o=document.querySelector(#selectedFilters),s=o.querySelector(`#${r}${n}`);t.forEach((e,r)={e.field_value_slug==n&&(t[r].checked=!1)}),o.removeChild(s)}(t,r),e.classList.remove(js-sorted))}window.addEventListener(resize,()={p=m.offsetHeight,u.style.minHeight=p+px,closeAllFilter(filters,e)}),h(e,f,k),o.addEventListener(click,()={!function(e,t){const r=e.querySelectorAll(.js-filter-checkbox),n=document.querySelector(#selectedFilters);Array.from(r).forEach(e={e.checked=!1}),t.forEach(e={e.checked=!1}),n.innerHTML=,e.classList.remove(js-sorted)}(e,n)}),c.addEventListener(click,t={const r=e.classList.contains(js-sorted);g(t),r(f=y(n,e,!0),h(e,f,k))}),a.addEventListener(click,g),a.addEventListener(input,()={!function(e,t,r){const n=e.value.trim();let o=null;console.log(n);const s=t.filter(e={const t=e.field_value_name;if(t.includes(n))return e});!==n&&(o=s.sort((e,t)=sorting(e,t)));===n&&(o=y(s,r,!0));h(r,o,k)}(a,n,e)}),s.length&&Array.from(s).forEach(e={v(e,n)})}function closeAllFilter(e,t){const r=e[0].closest(.js-filters-top),n=r.querySelector(.js-filters-list).offsetHeight;let o=!1;Array.from(e).forEach(e={if(t===e)return void(o=!0);const r=e.querySelector(.js-filter-arrow-icon);e.closest(.js-filter).querySelector(.js-filter-body).classList.remove(filter__body--is-open),e.classList.remove(filter--is-open),r.classList.remove(filter__arrow-icon--is-up)}),o(r.style.minHeight=n+px)}function rollUpFiltersbtn(){const e=filtersWrap.querySelector(#filters),t=filtersWrap.querySelector(#rollUpBtn),r=e.offsetHeight;filtersWrap.style.height=r+px,setTimeout(()={filtersWrap.style.height=60px,t.classList.remove(filters__roll-up--is-show)},20),setTimeout(()={filtersWrap.style.width=190px,filtersWrap.classList.add(js-filters-close)},220)}function expandFilters(){const e=document.querySelector(#filtersWrap),t=document.querySelector(#filters),r=e.querySelector(#rollUpBtn);e.style.width=100%,setTimeout(()={r.classList.add(filters__roll-up--is-show),e.style.height=t.offsetHeight+px},200),setTimeout(()={e.style.height=auto},300)}function changePlaceholder(e){const t=e.querySelector(.js-filter-input),r=t.placeholder;t.addEventListener(focus,()={t.placeholder=Поиск по значениям}),t.addEventListener(blur,()={t.placeholder=r})}function getInfoFromBtnToSend(e){const t={},r=e.getAttribute(data-link),n=e.getAttribute(data-article),o={_token_token,articlen};return t.api=r,t.article=n,t.data=o,t}function setInBasketBtn(e,t,r){const n=e.closest(.js-product-card),o=n.querySelector(.js-basket-icon),s=n.querySelector(.js-basket-btn);s&&toggleInBasketBtn(s,t,r),o&&toggleInBasketIconBtn(o,t)}function toggleInBasketIconBtn(e,t=!1){console.log(e.src),e.src=t.imgiconin-basket-icon.svg.imgiconcard-basket-icon.svg}function toggleInBasketBtn(e,t=!1,r){if(t)return e.classList.remove(yellow-btn),e.classList.add(white-btn),void(e.innerHTML=r);e.classList.add(yellow-btn),e.classList.remove(white-btn),e.innerHTML=r}function getArticlesAndQuantityArr(e){const t=[];return Array.from(e).forEach(e={let r={articlesgetArticles(e),quantitygetQuantity(e)};t.push(r)}),t}function getArticles(e){return e.getAttribute(data-article)}function getQuantity(e){return e.querySelector(.js-quantity).value}async function addInBasketBns(e){const t=getInfoFromBtnToSend(e),r=await getData(POST,t.data,t.api);setInBasketBtn(e,r.toggle,r.desc),setBasketIndicator(r.count)}async function addFavorite(e){const t=getInfoFromBtnToSend(e),r=await getData(POST,t.data,t.api);setFavoriteIcon(e,r.toggle),setFavoriteIndicator(r.count)}async function removeProduct(e){const t=e.closest(.js-product-card),r=t.parentElement,n=getInfoFromBtnToSend(e),o=await getData(POST,n.data,n.api);o.toggle&&(r.removeChild(t),setTotalPrice(o.total_price)),o.count,o.count0&&setBasketIndicator(o.count),console.log(t)}function setBasketIndicator(e){const t=document.querySelector(#basketIndicator),r=document.querySelector(#basketCount);0===e&&(t.classList.remove(h-icon__indicator--is-show),r.innerHTML=0),e&&(t.classList.add(h-icon__indicator--is-show),r.innerHTML=e)}function setFavoriteIndicator(e){const t=document.querySelector(#favoriteIndicator),r=document.querySelector(#favoriteCount);console.log(r),0===e&&(t.classList.remove(h-icon__indicator--is-show),r.innerHTML=0),e&&(t.classList.add(h-icon__indicator--is-show),r.innerHTML=e)}function render(e,t,r){let n=;t.forEach(e={n+=r(e)}),e.insertAdjacentHTML(beforeEnd,n)}async function renderCatalogNav(){const e=catalogNav.getAttribute(data-link),t={_token_token},r=await getData(POST,t,e);render(catalogNav,r.desc,function(e){const{linkt,textr,articlen,data_linko}=e;return`n            div class=category js-dropdownn              div class=category__namen                a href='${t}' class='category__link'n                  ${r}n                an                div data-link=${o} class=category__btn js-dropdown-btn js-subcategory-btn data-article=${n}n                  img src=.imgcontrolsdropdown-btn.svg alt= class=category__arrown                divn              divn              div class=subcategories js-dropdown-bodyn                ul class=subcategories__list js-dropdown-contentn            n                uln              divn            divn    `});const n=document.querySelectorAll(.js-subcategory-btn);Array.from(n).forEach(e={e.addEventListener(click,()=renderSubCatalogNav(e))})}async function renderModalProduct(e,t){const r=t.getAttribute(data-link),n=t.getAttribute(data-article),o=e.querySelector(.js-list-wrap),s={_token_token,articlen};let c=null,i=null;const a=await getData(POST,s,r);render(o,a.prod,function(e){const{articlet,countr,linkn,titleo,imgs,favorite_linkc,count_linki,salea,pricel,favorited}=e;let u=null;u=d.imgiconfavorite-active-icon.svg.imgiconfavorite-icon.svg;return`n    div class=modal-card data-article='${t}'n    div class=modal-card__descn      div class=modal-card__previewn        a href=${n} class=modal-card__previewn          img src=${s} alt= class=modal-card__imgn        an      divn      h3 class='modal-card__title'n        a href=${n} class=modal-card__link link${o}an      h3n    divn    div class=modal-card__pricen      div class=modal-card__discountn        span class=discount-sticker${a}spann      divn      span class=modal-card__num${l}spann    divn    x3c!--modal-card__control--x3en    div class=modal-card__controlnn      x3c!--modal-card__counter--x3en      div class=modal-card__countern        div class=counter js-counter data-article=${t} data-link=${i}n          span class=counter__sing js-dec-spannn          input type='text' class=counter__quantity js-quantity value='${r}'nn          span class=counter__sing js-inc+spann        divn      divn      x3c!--modal-card__counter--x3enn      div class=modal-card__icon n        span class=btn js-favorite data-article='${t}' data-link=${c}n          img class=btn__icon js-favorite-img src=${u} alt=n        spann      divnn    divn    x3c!--modal-card__control--x3en  divn    `}),c=o.querySelectorAll(.js-counter),i=o.querySelectorAll(.js-favorite),c.length&&Array.from(c).forEach(e={managingСounter(e)}),i.length&&Array.from(i).forEach(e={e.addEventListener(click,()={addFavorite(e)})}),setTotalPrice(a.card.total_price)}async function renderSubCatalogNav(e){const t=e.getAttribute(data-link),r=e.getAttribute(data-article),n=e.closest(.js-dropdown),o=n.querySelector(.js-dropdown-content),s=o.querySelectorAll(.js-item),c={_token_token,articler};n&&(s.length(render(o,(await getData(POST,c,t)).desc,function(e){const{linkt,textr}=e;return`n    li class=subcategories__item  js-itemn      a href=${t} class=subcategories__linkn      ${r}n      an    lin    `}),dropdownOpen(e),rotateArrowDropdownsBtn(e),e.addEventListener(click,()=dropdownOpen(e)),e.addEventListener(click,()=rotateArrowDropdownsBtn(e))))}function renderNews(e){render(newsList,e,function(e){const{titlet,imgr,linkn}=e;return`n    div class=news-cardn              div class=news-card__previewn                a href=${n} class=news-card__preview-linkn                  img src=${r} alt= class=news-card__imgn                an              divn              div class=news-card__descn                h2 class=news-card__titlea href=${n} class=news-card_link${t}n                  an                h2n              divn            divn    `}),news.classList.remove(js-loading),news.querySelector(.spinner).remove()}function getMarkupSpinner(){return'n  div class=spinnern    div class=loadingio-spinner-dual-ring-3inkns7bjnwn      div class=ldio-2ikg7lk3b38n        divdivn        divn          divdivn        divn      divn    divn    span class=spinner__textЗагружаю...spann  divn  '}function sorting(e,t){return e.field_value_namet.field_value_name1e.field_value_namet.field_value_name-10}loginForm&&(loginForm.addEventListener(submit,e={e.preventDefault()}),sendLoginForm()),registrationForm&&(registrationForm.addEventListener(submit,e={e.preventDefault()}),sendRegistrationForm()),counters.length&&Array.from(counters).forEach(e={managingСounter(e)}),favoriteBtns.length&&Array.from(favoriteBtns).forEach(e={e.addEventListener(click,()={addFavorite(e)})}),inBasketBns.length&&Array.from(inBasketBns).forEach(e={e.addEventListener(click,()={addInBasketBns(e)})}),dropdownsBtns.length&&Array.from(dropdownsBtns).forEach(e={e.addEventListener(click,()={dropdownOpen(e),rotateSortingArrow(e)})}),catalogNav&&window.addEventListener(load,renderCatalogNav),elementLinks.length&&Array.from(elementLinks).forEach(e={e.addEventListener(click,()=showIElement(e))}),map&&ymaps.ready(initMap),switchToggle&&switchToggle.addEventListener(click,toggleSwitch),mainSlider&&slider(mainSlider,!0),productSlider&&slider(productSlider),popularGoods&&slider(popularGoods,!1),newsSlider&&slider(newsSlider,!1),sectionSlider&&slider(sectionSlider),productCarusel&&carusel(productCarusel),callbackForm&&(callbackForm.addEventListener(submit,e={e.preventDefault()}),sendCallbackForm()),feetbackForm&&(feetbackForm.addEventListener(submit,e={e.preventDefault()}),sendFeetbackForm()),helpForm&&(helpForm.addEventListener(submit,e={e.preventDefault()}),sendHelpForm()),mobileMenuBtn&&mobileMenuBtn.addEventListener(click,mobileMenuOpen),fastOrderForm&&(fastOrderForm.addEventListener(submit,e={e.preventDefault()}),sendFastOrderForm()),orderForm&&(orderForm.addEventListener(submit,e={e.preventDefault()}),sendOrderForm()),removeProductBtns.length&&Array.from(removeProductBtns).forEach(e={e.addEventListener(click,()={removeProduct(e)})}),news&&window.addEventListener(scroll,function(){loadingNews()}),rollUpBtns.length&&Array.from(rollUpBtns).forEach(e={e.addEventListener(click,()={rollUpFiltersbtn()})}),expandFiltersBtn&&expandFiltersBtn.addEventListener(click,expandFilters),filters.length&&Array.from(filters).forEach(e={filterFn(e),changePlaceholder(e)}),feetbackModal&&modalsWrap&&feetbackBtn.addEventListener(click,()={modalOpen(feetbackModal)}),fastOrderBtns.length&&modalsWrap&&Array.from(fastOrderBtns).forEach(e={e.addEventListener(click,()=modalOpen(fastOrderModal)),e.addEventListener(click,()=renderModalProduct(fastOrderModal,e))}),orderModal&&orderBtn&&orderBtn.addEventListener(click,()=modalOpen(orderModal)),helpBtn&&helpBtn.addEventListener(click,()=modalOpen(helpModal)),modalCloseBtns.length&&Array.from(modalCloseBtns).forEach(e={e.addEventListener(click,()=modalClose(e))}),closeFastOrderBtn&&closeFastOrderBtn.addEventListener(click,clearFastOrderList),upwardBtn&&(upwardBtn.addEventListener(click,goTop),window.addEventListener(scroll,showUpBtn)),mobileMenuCloseBtn&&mobileMenuCloseBtn.addEventListener(click,mobileMenuClose);